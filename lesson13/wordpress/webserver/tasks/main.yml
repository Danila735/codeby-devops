---
- name: Установка Apache и PHP-модулей
  ansible.builtin.apt:
    name: 
      - apache2
      - libapache2-mod-php
      - php-mysql
      - php-curl
      - php-gd
      - php-mbstring
      - php-xml
      - php-xmlrpc
      - php-soap
      - php-intl
      - php-zip
    state: present
    update_cache: yes
  become: yes

- name: Включение и запуск службы Apache
  ansible.builtin.service:
    name: apache2
    state: started
    enabled: yes
  become: yes

# Дополнительные задачи: настройка виртуального хоста
- name: Настройка виртуального хоста Apache
  ansible.builtin.template:
    src: apache.conf.j2
    dest: /etc/apache2/sites-available/wordpress.conf
  become: yes
  notify: 
    - Перезапуск Apache
# tasks file for webserver
